jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var result,decode=options.raw?function(s){return s;}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null;};jQuery(document).ready(function(){if(!(jQuery('#modules-form').length||jQuery('#gkMainbody').find('.item-page').hasClass('edit'))){jQuery('a[href*="#"]').on('click',function(e){e.preventDefault();if(this.hash!==''&&this.hash.indexOf('carousel')===-1){var target=jQuery(this.hash);if(this.hash!==''&&this.href.replace(this.hash,'')==window.location.href.replace(window.location.hash,'')){if(target.length&&this.hash!=='#'){jQuery('html, body').stop().animate({'scrollTop':target.offset().top},1000,'swing',function(){if(this.hash!=='#'){window.location.hash=target.selector;}});}else if(this.hash!==''&&this.href.replace(this.hash,'')!==''){window.location.href=this.href;}}else if(this.hash!==''&&this.href.replace(this.hash,'')!==''){window.location.href=this.href;}}});}
if(jQuery('#gkStyleArea')){jQuery('#gkStyleArea').find('a').each(function(i,element){jQuery(element).click(function(e){e.preventDefault();e.stopPropagation();changeStyle(i+1);});});jQuery('#gkBackgrounds').find('a').each(function(i,element){element.on('click',function(e){e.preventDefault();e.stopPropagation();changeBg(i+1);});});}
if(jQuery('#gkSocialMenu')){jQuery('#gkSocialMenu').on('click',function(e){e.addClass('hover');});}
if(jQuery('#gkPopupLogin')){var popup_overlay=jQuery('#gkPopupOverlay');popup_overlay.css({'display':'none','opacity':0});popup_overlay.fadeOut();jQuery('#gkPopupLogin').css({'display':'block','opacity':0,'height':0});var opened_popup=null;var popup_login=null;var popup_login_h=null;var popup_login_fx=null;if(jQuery('#gkPopupLogin')&&jQuery('#btnLogin')){popup_login=jQuery('#gkPopupLogin');popup_login.css('display','block');popup_login_h=popup_login.find('.gkPopupWrap').outerHeight();jQuery('#gkLogin').click(function(e){e.preventDefault();e.stopPropagation();popup_overlay.css({'opacity':0.6});popup_overlay.fadeIn('slow');popup_login.animate({'opacity':1,'height':popup_login_h},200,'swing');opened_popup='login';setTimeout(function(){if(jQuery('#modlgn-username')){jQuery('#modlgn-username').focus();}},600);});}
popup_overlay.click(function(){if(opened_popup=='login'){popup_overlay.fadeOut('slow');popup_login.css({'opacity':0,'height':0});}});}
jQuery('.header').each(function(i,elm){if(jQuery(elm).hasClass('box')){jQuery(elm).find('.nspArt').each(function(i,art){art=jQuery(art);art.find('.nspImageWrapper').append(art.find('.nspHeader'));});}});jQuery('.nsphover').each(function(i,elm){if(jQuery(elm).hasClass('box')){jQuery(elm).find('.nspArt').each(function(i,art){var overlay=jQuery('<div></div>');overlay.attr('class','nspHoverOverlay');var test=jQuery('<div></div>');art=jQuery(art);var info=art.find('.nspInfo1');art.append(overlay);overlay.append(art.find('.nspText'));var copy=art.find('.nspHeader').clone();overlay.prepend(copy);art.mouseenter(function(){overlay.addClass('active');if(info){info.addClass('active');}});art.mouseleave(function(){overlay.removeClass('active');if(info){info.removeClass('active');}});});}});var newsletter_submit=jQuery('#gk-newsletter-submit');if(newsletter_submit.length){newsletter_submit.on('click',function(e){jQuery.cookie('gk-news-newsletter-popup',1,{expires:30,path:'/'});});jQuery('#gk-newsletter-popup-close').on('click',function(e){e.preventDefault();jQuery.cookie('gk-news-newsletter-popup',1,{expires:30,path:'/'});jQuery('#gk-newsletter-popup').addClass('hidden-popup');});}});jQuery(window).on('load',function(){var newsletter=jQuery('#gk-newsletter-popup');if(newsletter.length){switch(newsletter.attr('data-display')){case 'direct':setTimeout(function(){newsletter.removeClass('hidden-popup');},1000);break;case 'after_time':setTimeout(function(){newsletter.removeClass('hidden-popup');},newsletter.attr('data-time')*1000);break;case 'after_scroll':var win=jQuery(window);var destination=newsletter.attr('data-scroll');var newsletter_scroll=function(){if(win.scrollTop()>=destination){newsletter.removeClass('hidden-popup');jQuery(window).off('scroll',newsletter_scroll);}};jQuery(window).on('scroll',newsletter_scroll);break;}}});function changeStyle(style){var file1=$GK_TMPL_URL+'/css/style'+style+'.css';var file2=$GK_TMPL_URL+'/css/typography/typography.style'+style+'.css';jQuery('head').append('<link rel="stylesheet" href="'+file1+'" type="text/css" />');jQuery('head').append('<link rel="stylesheet" href="'+file2+'" type="text/css" />');jQuery.cookie('gk_news_j30_style',style,{expires:365,path:'/'});}